<mvc:View controllerName="com.controller.Worklist" xmlns="sap.m" xmlns:table="sap.ui.table" xmlns:mvc="sap.ui.core.mvc"
	xmlns:core="sap.ui.core" xmlns:semantic="sap.f.semantic" xmlns:footerbar="sap.ushell.ui.footerbar" xmlns:filterBar="sap.ui.comp.filterbar">
	<semantic:SemanticPage id="page" headerPinnable="false" toggleHeaderOnTitleClick="false">
		<semantic:titleHeading>
			<Title text="{i18n>worklistTitle}"/>
		</semantic:titleHeading>
		<semantic:content>
			<IconTabBar id="iconTabBar" select="onQuickFilter" expandable="false" applyContentPadding="false">
				<items>
					<IconTabFilter key="all" showAll="true" count="{worklistView>/worklistTableCount}" text="{i18n>WorklistFilterProductsAll}"/>
					<IconTabSeparator/>
					<IconTabFilter key="idCerrados" icon="sap-icon://message-success" iconColor="Positive" count="{worklistView>/worklistTableCountCerrados}"
						text="{i18n>WorklistFilterCerrados}"/>
					<IconTabFilter key="idAbiertos" icon="sap-icon://message-warning" iconColor="Critical" count="{worklistView>/worklistTableCountAbiertos}"
						text="{i18n>WorklistFilterAbiertos}"/>
					<IconTabFilter key="idAnulados" icon="sap-icon://message-error" iconColor="Negative" count="{worklistView>/worklistTableCountAnulados}"
						text="{i18n>WorklistFilterAnulados}"/>
				</items>
				<content>
					<filterBar:FilterBar id="FilterBar" reset="onReset" search="onSearchData" useToolbar="true"  showRestoreButton="true" showGoOnFB="false">
						<filterBar:filterItems>
							<filterBar:FilterItem name="A" label="Fecha Inicio">
								<filterBar:control>
									<DatePicker id="datePickerfecini" 
									valueFormat="yyyy-MM-ddTHH:mm:ss" 
									change="handleDateChangefecini"/>
								</filterBar:control>
							</filterBar:FilterItem>
							<filterBar:FilterItem name="B" label="Fecha Fin">
								<filterBar:control>
									<DatePicker id="datePickerfecfin"
									valueFormat="yyyy-MM-ddTHH:mm:ss"
									change="handleDateChangefecfin"/>
								</filterBar:control>
							</filterBar:FilterItem>
							<filterBar:FilterItem name="C" label="Sociedad">
								<filterBar:control>
									<MultiComboBox id="SociedadCB" selectionFinish="handleSelectionSociedadFinish" items="{ path: '/SociedadSet', sorter: { path: 'Butxt' } }">
										<core:Item key="{Bukrs}" text="{Bukrs}-{Butxt}"/>
									</MultiComboBox>
								</filterBar:control>
							</filterBar:FilterItem>
							<filterBar:FilterItem name="D" label="Torre">
								<filterBar:control>
									<MultiComboBox id="TorreCB" selectionFinish="handleSelectionTorreFinish" items="{ path: '/TorreSet', sorter: { path: 'Destorre' } }">
										<core:Item key="{Codtorre}" text="{Destorre}"/>
									</MultiComboBox>
								</filterBar:control>
							</filterBar:FilterItem>
							<filterBar:FilterItem name="E" label="Proceso">
								<filterBar:control>
									<MultiComboBox id="ProcesoCB" selectionFinish="handleSelectionProcesoFinish" items="{ path: '/ProcesoSet', sorter: { path: 'Desdproc' } }">
										<core:Item key="{Codproc}" text="{Codproc}-{Desdproc}"/>
									</MultiComboBox>
								</filterBar:control>
							</filterBar:FilterItem>
							<filterBar:FilterItem name="F" label="Status">
								<filterBar:control>
									<MultiComboBox  selectionFinish="handleSelectionStatusFinish" items="{cbState>/items}"> 
										<core:Item key="{cbState>Code}" text="{cbState>Name}"/>
									</MultiComboBox>
								</filterBar:control>
							</filterBar:FilterItem>
							
						</filterBar:filterItems>
					</filterBar:FilterBar>
					<!--<Table id="table" width="auto"-->
					<!--<Table id="table" width="auto" items="{ path: '/Reporte01Set', sorter: { path: 'Ticket', descending: false } }" -->
					<Table id="table" width="auto" items="{modelPath>/items}"
						noDataText="{worklistView>/tableNoDataText}" busyIndicatorDelay="{worklistView>/tableBusyDelay}" growing="true" growingScrollToLoad="true"
						updateFinished="onUpdateFinished">
						<headerToolbar>
							<Toolbar>
								<Title id="tableHeader" text="{worklistView>/worklistTableTitle}"/>
								<ToolbarSpacer/>
								<SearchField id="searchField" tooltip="{i18n>worklistSearchTooltip}" search="onSearch" width="auto"></SearchField>
								<Button icon="sap-icon://download" press="onDataExport"/>
								<Button text="Ejecutar" press="ongetData"/>
								<ToolbarSpacer/>
								<Button tooltip="View Settings" icon="sap-icon://drop-down-list" press="handleViewSettingsDialogButtonPressed" />
							</Toolbar>
						</headerToolbar>
						<columns>
							<Column id="nameColumn">
								<Text text="{i18n>tableNameTicketTitle}" id="nameColumnTitle"/>
							</Column>
							<Column id="Sociedad" minScreenWidth="Tablet" demandPopin="true">
								<Text text="{i18n>tableNameBukrsTitle}"/>
							</Column>
							<Column id="Torre" minScreenWidth="Tablet" demandPopin="true">
								<Text text="{i18n>tableNameCodTorreTitle}"/>
							</Column>
							<Column id="DescTorre" minScreenWidth="Tablet" demandPopin="true">
								<Text text="{i18n>tableNameDesTorreTitle}"/>
							</Column>
							<Column id="Proceso" minScreenWidth="Tablet" demandPopin="true">
								<Text text="{i18n>tableNameProcesoTitle}"/>
							</Column>
							<Column id="DescProceso" minScreenWidth="Tablet" demandPopin="true">
								<Text text="{i18n>tableNameDesProcesoTitle}"/>
							</Column>
							<Column id="Statustk" minScreenWidth="Tablet" demandPopin="true">
								<Text text="{i18n>tableNameStatustkTitle}"/>
							</Column>
						</columns>
						<items>
							<ColumnListItem type="Navigation" press="onPressRow">
								<cells>
									<ObjectIdentifier title="{modelPath>Ticket}"/>
									<Text text="{modelPath>Bukrs}"/>
									<Text text="{modelPath>Codtorre}"/>
									<Text text="{modelPath>Destorre}"/>
									<Text text="{modelPath>Codproc}"/>
									<Text text="{modelPath>Desproc}"/>
									<ObjectNumber number="{modelPath>Desstattk}" state="{ path: 'modelPath>Statustk', formatter: '.formatter.status' }"/>
								</cells>
							</ColumnListItem>
						</items>
					</Table>
				</content>
			</IconTabBar>
		</semantic:content>
		<semantic:sendEmailAction>
			<semantic:SendEmailAction id="shareEmail" press="onShareEmailPress"/>
		</semantic:sendEmailAction>
		<semantic:shareInJamAction>
			<semantic:ShareInJamAction id="shareInJam" visible="{FLP>/isShareInJamActive}" press="onShareInJamPress"/>
		</semantic:shareInJamAction>
		<semantic:saveAsTileAction>
			<footerbar:AddBookmarkButton id="shareTile" title="{worklistView>/saveAsTileTitle}"/>
		</semantic:saveAsTileAction>
	</semantic:SemanticPage>
</mvc:View>